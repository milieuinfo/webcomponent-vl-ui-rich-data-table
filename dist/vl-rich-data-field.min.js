import{vlElement,define}from"/node_modules/vl-ui-core/dist/vl-core.min.js";export class VlRichDataField extends(vlElement(HTMLElement)){static get headerAttributes(){return["name","label","sortable","sorting-direction","sorting-priority"]}static get bodyAttributes(){return["selector","renderer"]}static get _observedAttributes(){return this.headerAttributes.concat(this.bodyAttributes)}static get is(){return"vl-rich-data-field"}headerTemplate(){const t=document.createElement("th"),e=this.__getHeaderContentElement();return e&&t.appendChild(e),this.sortable&&t.setAttribute("data-vl-sortable",""),t}valueTemplate(t){const e=document.createElement("td");this.label&&e.setAttribute("data-title",this.label);const r=this.__getValueContentElement(t);return r?e.appendChild(r):this._renderer&&this._renderer(e,t),e}get name(){return this.dataset.vlName}get selector(){return this.dataset.vlSelector}get label(){return this.dataset.vlLabel}get sortable(){return void 0!==this.dataset.vlSortable}get sortingDirection(){return this.dataset.vlSortingDirection}get sortingPriority(){return this.dataset.vlSortingPriority}get _labelSlotElement(){return this.querySelector('template[slot="label"]')}get _contentSlotElement(){return this.querySelector('template[slot="content"]')}set renderer(t){this._renderer=t,this._changed(["renderer"])}_nameChangedCallback(t,e){t!==e&&this._changed(["name"])}_selectorChangedCallback(t,e){t!==e&&this._changed(["selector"])}_labelChangedCallback(t,e){t!==e&&this._changed(["label"])}_sortableChangedCallback(t,e){t!==e&&this._changed(["sortable"])}_sortingDirectionChangedCallback(t,e){t!==e&&this._changed(["sorting-direction"])}_sortingPriorityChangedCallback(t,e){t!==e&&this._changed(["sorting-priority"])}_changed(t){this.dispatchEvent(new CustomEvent("change",{detail:{properties:t}}))}get __headerContent(){return this.label||(this._labelSlotElement?this._labelSlotElement.innerHTML:void 0)}__getHeaderContentElement(){const t=this.__headerContent;if(t){if(this.sortable){const e=this.sortingDirection?`data-vl-direction="${this.sortingDirection}"`:"",r=this.sortingPriority?`data-vl-priority="${this.sortingPriority}"`:"",i=`<vl-rich-data-sorter data-vl-for="${this.name}" ${e} ${r}></vl-rich-data-sorter>`;return this._template(`<a>${t}${i}</a>`)}return this._template(`${t}`)}}__getValueContentElement(t){if(this.selector)return this._template(`${this.selector.split(".").reduce((t,e)=>t?t[e]:null,t)}`);if(this._contentSlotElement){const e=`${this.querySelector('template[slot="content"]').innerHTML}`,r=((t,e)=>new Function("item","return `"+t+"`")(e)).call(this,e,t);return this._template(r)}return null}}define(VlRichDataField.is,VlRichDataField);